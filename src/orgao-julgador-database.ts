/**
 * Base de dados completa dos Órgãos Julgadores do TRT-15
 * Padrão oficial aceito pelo sistema PJE
 */

export const ORGAOS_JULGADORES_DATABASE = [
  "LIQ2 - Bauru",
  "Órgão Centralizador de Leilões Judiciais de Limeira",
  "Órgão Centralizador de Leilões Judiciais de Araraquara",
  "Vara do Trabalho de Ubatuba",
  "EXE1 - São José dos Campos",
  "CON1 - Araraquara",
  "Órgão Centralizador de Leilões Judiciais de Araçatuba",
  "CCP SÃO JOSÉ DO RIO PRETO - Centro de Conciliação Pré Processual",
  "Órgão Centralizador de Leilões Judiciais de Bauru",
  "EXE1 - Araraquara",
  "Vara do Trabalho de Cruzeiro",
  "Vara do Trabalho de Pederneiras",
  "Vara do Trabalho de Matão",
  "1º Núcleo de Justiça 4.0",
  "8ª Vara do Trabalho de Campinas",
  "Órgão Centralizador de Leilões Judiciais de Campinas",
  "Órgão Centralizador de Leilões Judiciais de Franca",
  "EXE4 - São José dos Campos",
  "EXE2 - Araraquara",
  "LIQ2 - Araraquara",
  "Posto Avançado da Justiça do Trabalho da 15ª Região",
  "Vara do Trabalho de Indaiatuba",
  "DAM - Araraquara",
  "LIQ1 - São José dos Campos",
  "CON2 - Bauru",
  "EXE1 - Bauru",
  "DIVEX - Presidente Prudente",
  "Vara do Trabalho de Capivari",
  "Assessoria de Precatórios",
  "CON2 - Jundiaí",
  "EXE1 - Jundiaí",
  "Vara do Trabalho de Itapira",
  "2ª Vara do Trabalho de Franca",
  "CON1 - Jundiaí",
  "LIQ1 - Piracicaba",
  "2ª Vara do Trabalho de Bauru",
  "LIQ2 - Presidente Prudente",
  "Vara do Trabalho de Hortolândia",
  "Juizado Especial da Infância e Adolescência de Bauru",
  "Corregedoria-Geral",
  "EXE3 - Araraquara",
  "DAM - Bauru",
  "Vara do Trabalho de Tietê",
  "Vara do Trabalho de Dracena",
  "Vara do Trabalho de São Roque",
  "Vara do Trabalho de Ourinhos",
  "Vara do Trabalho de Lorena",
  "Vara do Trabalho de Itararé",
  "EXE2 - Sorocaba",
  "EXE1 - Campinas",
  "7ª Vara do Trabalho de Campinas",
  "EXE6 - Campinas",
  "Assessoria de Execução II de Sertãozinho, Orlândia, Batatais e Franca",
  "4ª Vara do Trabalho de Ribeirão Preto",
  "5ª Vara do Trabalho de Jundiaí",
  "EXE4 - São José do Rio Preto",
  "EXE3 - Campinas",
  "LIQ1 - Campinas",
  "Órgão Centralizador de Leilões Judiciais de São José dos Campos",
  "Divisão de Execução de Taubaté",
  "LIQ2 - Campinas",
  "LIQ1 - São José do Rio Preto",
  "Vara do Trabalho de Itatiba",
  "CCP ARARAQUARA - Centro de Conciliação Pré Processual",
  "Vara do Trabalho de Salto",
  "CCP DE 2º GRAU - Centro de Conciliação Pré Processual",
  "EXE1 - Sorocaba",
  "CEJUSC TAUBATÉ - JT Centro Judiciário de Métodos Consensuais de Solução de Disputas da Justiça do Trabalho",
  "CON2 - Sorocaba",
  "LIQ1 - Sorocaba",
  "CON1 - São José dos Campos",
  "EXE1 - Presidente Prudente",
  "EXE5 - Campinas",
  "EXE4 - Araraquara",
  "DAM - Campinas",
  "Vara do Trabalho de Tanabi",
  "Posto Avançado da Justiça do Trabalho de Amparo em Pedreira",
  "Vara do Trabalho de Rio Claro",
  "Vara do Trabalho de Olímpia",
  "Vara do Trabalho de Lins",
  "Vara do Trabalho de Itápolis",
  "6ª Vara do Trabalho de Ribeirão Preto",
  "EXE4 - Campinas",
  "4ª Vara do Trabalho de Jundiaí",
  "1ª Vara do Trabalho de Catanduva",
  "1ª Vara do Trabalho de Jaú",
  "1ª Vara do Trabalho de São Carlos",
  "1ª Vara do Trabalho de Sorocaba",
  "DIVEX - Campinas",
  "CEJUSC FRANCA - JT Centro Judiciário de Métodos Consensuais de Solução de Disputas da Justiça do Trabalho",
  "EXE2 - São José dos Campos",
  "CEJUSC PIRACICABA - JT Centro Judiciário de Métodos Consensuais de Solução de Disputas da Justiça do Trabalho",
  "2ª Vara do Trabalho de Araçatuba",
  "2ª Vara do Trabalho de Assis",
  "2ª Vara do Trabalho de Catanduva",
  "2ª Vara do Trabalho de Jaboticabal",
  "2ª Vara do Trabalho de Jaú",
  "2ª Vara do Trabalho de Lençóis Paulista",
  "2ª Vara do Trabalho de Piracicaba",
  "5ª Vara do Trabalho de Campinas",
  "Órgão Centralizador de Leilões Judiciais de Taubaté",
  "Vara do Trabalho de Santa Cruz do Rio Pardo",
  "Divisão de Execução de Franca",
  "Vara do Trabalho de Teodoro Sampaio",
  "2ª Vara do Trabalho de Marília",
  "CEJUSC ARAÇATUBA - JT Centro Judiciário de Métodos Consensuais de Solução de Disputas da Justiça do Trabalho",
  "CEJUSC SJRIO PRETO - JT Centro Judiciário de Métodos Consensuais de Solução de Disputas da Justiça do Trabalho",
  "CEJUSC ARARAQUARA - JT Centro Judiciário de Métodos Consensuais de Solução de Disputas da Justiça do Trabalho",
  "DIVEX - Bauru",
  "CON2 - Campinas",
  "Vara do Trabalho de Fernandópolis",
  "Vara do Trabalho de São José do Rio Pardo",
  "Vara do Trabalho de Registro",
  "Vara do Trabalho de Mogi Mirim",
  "DIVEX - São José dos Campos",
  "4ª Vara do Trabalho de Sorocaba",
  "EXE2 - Bauru",
  "3ª Vara do Trabalho de Sorocaba",
  "1ª Vara do Trabalho de Americana",
  "1ª Vara do Trabalho de Franca",
  "DAM - Jundiaí",
  "Vara do Trabalho de Leme",
  "EXE2 - Campinas",
  "CON2 - Piracicaba",
  "CEJUSC SJCAMPOS - JT Centro Judiciário de Métodos Consensuais de Solução de Disputas da Justiça do Trabalho",
  "EXE2 - Piracicaba",
  "2ª Vara do Trabalho de Araraquara",
  "EXE3 - Piracicaba",
  "2ª Vara do Trabalho de Limeira",
  "2ª Vara do Trabalho de Presidente Prudente",
  "2ª Vara do Trabalho de Ribeirão Preto",
  "6ª Vara do Trabalho de Campinas",
  "4ª Vara do Trabalho de Campinas",
  "DIVEX - São José do Rio Preto",
  "2ª Vara do Trabalho de Jundiaí",
  "CEJUSC LIMEIRA - JT Centro Judiciário de Métodos Consensuais de Solução de Disputas da Justiça do Trabalho",
  "DIVEX - Sorocaba",
  "1ª Vara do Trabalho de Limeira",
  "Vara do Trabalho de Itanhaém",
  "2ª Vara do Trabalho de Jacareí",
  "EXE2 - Presidente Prudente",
  "2ª Vara do Trabalho de Paulínia",
  "Divisão de Execução de Araçatuba",
  "Divisão de Execução de Limeira",
  "Vara do Trabalho de Presidente Venceslau",
  "CON1 - Campinas",
  "EXE4 - Piracicaba",
  "Vara do Trabalho de Sumaré",
  "Vara do Trabalho de Caraguatatuba",
  "DAM - Piracicaba",
  "EXE4 - Sorocaba",
  "EXE3 - Presidente Prudente",
  "Vara do Trabalho de Itapetininga",
  "Vara do Trabalho de Mogi Guaçu",
  "Vara do Trabalho de José Bonifácio",
  "Vara do Trabalho de Itapeva",
  "5ª Vara do Trabalho de São José dos Campos",
  "4ª Vara do Trabalho de São José dos Campos",
  "4ª Vara do Trabalho de Bauru",
  "1ª Vara do Trabalho de Araçatuba",
  "1ª Vara do Trabalho de Jaboticabal",
  "1ª Vara do Trabalho de Paulínia",
  "2ª Vara do Trabalho de Americana",
  "1ª Vara do Trabalho de Presidente Prudente",
  "CEJUSC SOROCABA - JT Centro Judiciário de Métodos Consensuais de Solução de Disputas da Justiça do Trabalho",
  "Juizado Especial da Infância e Adolescência de Araçatuba",
  "Juizado Especial da Infância e Adolescência de Fernandópolis",
  "Juizado Especial da Infância e Adolescência de Franca",
  "Juizado Especial da Infância e Adolescência de Ribeirão Preto",
  "EXE2 - Jundiaí",
  "3ª Vara do Trabalho de Bauru",
  "3ª Vara do Trabalho de Jundiaí",
  "3ª Vara do Trabalho de Piracicaba",
  "CCP BAURU - Centro de Conciliação Pré Processual",
  "Vara do Trabalho de Araras",
  "CCP JUNDIAÍ - Centro de Conciliação Pré Processual",
  "1ª Vara do Trabalho de Jundiaí",
  "CON2 - Araraquara",
  "CCP SÃO JOSÉ DOS CAMPOS - Centro de Conciliação Pré Processual",
  "EXE4 - Bauru",
  "CEJUSC CAMPINAS - JT Centro Judiciário de Métodos Consensuais de Solução de Disputas da Justiça do Trabalho",
  "Juizado Especial da Infância e Adolescência de Sorocaba",
  "LIQ2 - Jundiaí",
  "DIVEX - Piracicaba",
  "DAM - Ribeirão Preto",
  "DIVEX - Ribeirão Preto",
  "CON2 - São José do Rio Preto",
  "EXE3 - Sorocaba",
  "EXE4 - Presidente Prudente",
  "Vara do Trabalho de Votuporanga",
  "LIQ1 - Ribeirão Preto",
  "Órgão Centralizador de Leilões Judiciais de Jundiaí",
  "DIVEX - Jundiaí",
  "1ª Vara do Trabalho de São José do Rio Preto",
  "1ª Vara do Trabalho de São José dos Campos",
  "2ª Vara do Trabalho de Campinas",
  "Vara do Trabalho de Amparo",
  "CCP ARAÇATUBA - Centro de Conciliação Pré Processual",
  "CCP TAUBATÉ - Centro de Conciliação Pré Processual",
  "Vara do Trabalho de Avaré",
  "Vara do Trabalho de Tupã",
  "Vara do Trabalho de Rancharia",
  "CEJUSC PRESIDENTE PRUDENTE - JT Centro Judiciário de Métodos Consensuais de Solução de Disputas da Justiça do Trabalho",
  "Juizado Especial da Infância e Adolescência de São José do Rio Preto",
  "LIQ1 - Araraquara",
  "LIQ1 - Jundiaí",
  "EXE1 - Ribeirão Preto",
  "DAM - São José do Rio Preto",
  "CON1 - São José do Rio Preto",
  "EXE1 - São José do Rio Preto",
  "LIQ2 - Sorocaba",
  "DAM - Presidente Prudente",
  "Órgão Centralizador de Leilões Judiciais de Presidente Prudente",
  "Vara do Trabalho de Batatais",
  "CCP CAMPINAS - Centro de Conciliação Pré Processual",
  "Vara do Trabalho de Andradina",
  "Vara do Trabalho de Pindamonhangaba",
  "Vara do Trabalho de Botucatu",
  "1ª Vara do Trabalho de Taubaté",
  "Vara do Trabalho de Aparecida",
  "Vara do Trabalho de Caçapava",
  "Vara do Trabalho de Atibaia",
  "CON1 - Bauru",
  "CEJUSC BAURU - JT Centro Judiciário de Métodos Consensuais de Solução de Disputas da Justiça do Trabalho",
  "Juizado Especial da Infância e Adolescência de Presidente Prudente",
  "Juizado Especial da Infância e Adolescência de São José dos Campos",
  "CON1 - Piracicaba",
  "EXE3 - Jundiaí",
  "EXE2 - Ribeirão Preto",
  "EXE2 - São José do Rio Preto",
  "LIQ2 - São José do Rio Preto",
  "Vara do Trabalho de Bebedouro",
  "CON1 - Sorocaba",
  "DAM - São José dos Campos",
  "DIVEX_ - Presidente Prudente",
  "3ª Vara do Trabalho de Araçatuba",
  "3ª Vara do Trabalho de Araraquara",
  "11ª Vara do Trabalho de Campinas",
  "3ª Vara do Trabalho de Campinas",
  "Órgão Centralizador de Leilões Judiciais de Ribeirão Preto",
  "Divisão de Apoio aos Magistrados de Sertãozinho",
  "CCP FRANCA - Centro de Conciliação Pré Processual",
  "1ª Vara do Trabalho de Campinas",
  "1ª Vara do Trabalho de Araraquara",
  "12ª Vara do Trabalho de Campinas",
  "Juizado Especial da Infância e Adolescência de Campinas",
  "LIQ1 - Bauru",
  "EXE4 - Jundiaí",
  "EXE1 - Piracicaba",
  "Vara do Trabalho de Adamantina",
  "EXE4 - Ribeirão Preto",
  "EXE3 - São José do Rio Preto",
  "Vara do Trabalho de Birigui",
  "Vara do Trabalho de Campo Limpo Paulista",
  "Órgão Centralizador de Leilões Judiciais de Sorocaba",
  "Vara do Trabalho de Bragança Paulista",
  "Vara do Trabalho de Cajuru",
  "Vara do Trabalho de Capão Bonito",
  "Vara do Trabalho de Tatuí",
  "Vara do Trabalho de Taquaritinga",
  "Vara do Trabalho de Garça",
  "Vara do Trabalho de São Joaquim da Barra",
  "CCP LIMEIRA - Centro de Conciliação Pré Processual",
  "EXE3 - Bauru",
  "Vara do Trabalho de Pirassununga",
  "Posto Avançado da Justiça do Trabalho de Araraquara em Américo Brasiliense",
  "Posto Avançado da Justiça do Trabalho de Campinas em Valinhos",
  "Justiça Itinerante/Posto Avançado da Justiça do Trabalho de Ituverava em Igarapava",
  "Órgão Centralizador de Leilões Judiciais de Piracicaba",
  "Posto Avançado da Justiça do Trabalho de Orlândia em Morro Agudo",
  "Posto Avançado da Justiça do Trabalho de Pederneiras em Bariri",
  "Posto Avançado da Justiça do Trabalho de São João da Boa Vista em Espírito Santo Do Pinhal",
  "Vara do Trabalho de Barretos",
  "Justiça Itinerante/Justiça em Movimento da Justiça do Trabalho de Teodoro Sampaio em Rosana",
  "CCP PIRACICABA - Centro de Conciliação Pré Processual",
  "CCP PRESIDENTE PRUDENTE - Centro de Conciliação Pré Processual",
  "1ª Vara do Trabalho de Bauru",
  "EXE3 - Ribeirão Preto",
  "CCP RIBEIRÃO PRETO - Centro de Conciliação Pré Processual",
  "CCP SOROCABA - Centro de Conciliação Pré Processual",
  "1ª Vara do Trabalho de Piracicaba",
  "DAM - Sorocaba",
  "CON2 - São José dos Campos",
  "CON1 - Presidente Prudente",
  "5ª Vara do Trabalho de Ribeirão Preto",
  "Órgão Centralizador de Leilões Judiciais de São José do Rio Preto",
  "Vara do Trabalho de Cravinhos",
  "1ª Vara do Trabalho de Ribeirão Preto",
  "Vara do Trabalho de Guaratinguetá",
  "Vara do Trabalho de São Sebastião",
  "Vara do Trabalho de Orlândia",
  "Vara do Trabalho de Porto Ferreira",
  "Vara do Trabalho de Piedade",
  "Vara do Trabalho de Penápolis",
  "Vara do Trabalho de Mococa",
  "Vara do Trabalho de Jales",
  "Vara do Trabalho de Itu",
  "10ª Vara do Trabalho de Campinas",
  "9ª Vara do Trabalho de Campinas",
  "Vara do Trabalho de Ituverava",
  "4ª Vara do Trabalho de São José do Rio Preto",
  "1ª Vara do Trabalho de Assis",
  "1ª Vara do Trabalho de Jacareí",
  "1ª Vara do Trabalho de Lençóis Paulista",
  "1ª Vara do Trabalho de Marília",
  "DIVEX - Araraquara",
  "LIQ2 - Piracicaba",
  "1ª Vara do Trabalho de Sertãozinho",
  "Vara do Trabalho de São João da Boa Vista",
  "Vara do Trabalho de Santa Bárbara D'Oeste",
  "3ª Vara do Trabalho de São José dos Campos",
  "CON2 - Ribeirão Preto",
  "EXE3 - São José dos Campos",
  "CEJUSC RIBEIRÃO PRETO - JT Centro Judiciário de Métodos Consensuais de Solução de Disputas da Justiça do Trabalho",
  "CEJUSC JUNDIAÍ - JT Centro Judiciário de Métodos Consensuais de Solução de Disputas da Justiça do Trabalho",
  "CON2 - Presidente Prudente",
  "2ª Vara do Trabalho de São Carlos",
  "2ª Vara do Trabalho de São José do Rio Preto",
  "2ª Vara do Trabalho de São José dos Campos",
  "2ª Vara do Trabalho de Sorocaba",
  "3ª Vara do Trabalho de São José do Rio Preto",
  "3ª Vara do Trabalho de Ribeirão Preto",
  "CON1 - Ribeirão Preto",
  "2ª Vara do Trabalho de Sertãozinho",
  "2ª Vara do Trabalho de Taubaté",
  "LIQ2 - Ribeirão Preto",
  "LIQ2 - São José dos Campos",
  "LIQ1 - Presidente Prudente"
];

/**
 * Interface para resultado da normalização
 */
export interface NormalizacaoResult {
  original: string;
  normalizado: string;
  encontrado: boolean;
  sugestoes?: string[];
  similaridade?: number;
}

/**
 * Normaliza um nome de Órgão Julgador para o padrão oficial
 */
export function normalizarOrgaoJulgador(nome: string): NormalizacaoResult {
  const nomeLimpo = nome.trim();
  
  // Busca exata (case insensitive)
  const matchExato = ORGAOS_JULGADORES_DATABASE.find(
    orgao => orgao.toLowerCase() === nomeLimpo.toLowerCase()
  );
  
  if (matchExato) {
    return {
      original: nomeLimpo,
      normalizado: matchExato,
      encontrado: true,
      similaridade: 1.0
    };
  }
  
  // Normalização inteligente de abreviações comuns
  const nomeNormalizado = normalizarAbreviacoes(nomeLimpo);
  
  // Busca com nome normalizado
  const matchNormalizado = ORGAOS_JULGADORES_DATABASE.find(
    orgao => orgao.toLowerCase() === nomeNormalizado.toLowerCase()
  );
  
  if (matchNormalizado) {
    return {
      original: nomeLimpo,
      normalizado: matchNormalizado,
      encontrado: true,
      similaridade: 0.95
    };
  }
  
  // Busca por similaridade
  const sugestoes = encontrarSugestoes(nomeLimpo);
  
  if (sugestoes.length > 0) {
    return {
      original: nomeLimpo,
      normalizado: sugestoes[0].orgao,
      encontrado: true,
      sugestoes: sugestoes.map(s => s.orgao),
      similaridade: sugestoes[0].similaridade
    };
  }
  
  return {
    original: nomeLimpo,
    normalizado: nomeLimpo,
    encontrado: false,
    sugestoes: []
  };
}

/**
 * Normaliza abreviações comuns para o formato completo
 */
function normalizarAbreviacoes(nome: string): string {
  let resultado = nome;
  
  // Mapeamento de abreviações comuns
  const abreviacoes: Array<{padrao: RegExp, substituicao: string}> = [
    // Varas do Trabalho
    { padrao: /^(\d+)ª?\s*VT\s+(?:de\s+)?(.+)$/i, substituicao: '$1ª Vara do Trabalho de $2' },
    { padrao: /^(\d+)ª?\s*Vara\s+(?:de\s+)?(.+)$/i, substituicao: '$1ª Vara do Trabalho de $2' },
    { padrao: /^Vara\s+(?:de\s+)?(.+)$/i, substituicao: 'Vara do Trabalho de $1' },
    
    // Execuções
    { padrao: /^EXE(\d+)\s*-\s*(.+)$/i, substituicao: 'EXE$1 - $2' },
    
    // Conciliações
    { padrao: /^CON(\d+)\s*-\s*(.+)$/i, substituicao: 'CON$1 - $2' },
    
    // Liquidações
    { padrao: /^LIQ(\d+)\s*-\s*(.+)$/i, substituicao: 'LIQ$1 - $2' },
    
    // Divisões
    { padrao: /^DIVEX\s*-\s*(.+)$/i, substituicao: 'DIVEX - $1' },
    
    // DAM
    { padrao: /^DAM\s*-\s*(.+)$/i, substituicao: 'DAM - $1' }
  ];
  
  // Mapeamento de nomes de cidades comuns
  const cidadesComuns: {[key: string]: string} = {
    'ribeirão': 'Ribeirão Preto',
    'ribeirao': 'Ribeirão Preto',
    'sorocaba': 'Sorocaba',
    'campinas': 'Campinas',
    'bauru': 'Bauru',
    'araraquara': 'Araraquara',
    'jundiaí': 'Jundiaí',
    'jundiai': 'Jundiaí',
    'piracicaba': 'Piracicaba',
    'franca': 'Franca',
    'presidente prudente': 'Presidente Prudente',
    'são josé dos campos': 'São José dos Campos',
    'sao jose dos campos': 'São José dos Campos',
    'são josé do rio preto': 'São José do Rio Preto',
    'sao jose do rio preto': 'São José do Rio Preto',
    'taubaté': 'Taubaté',
    'taubate': 'Taubaté',
    'limeira': 'Limeira',
    'araçatuba': 'Araçatuba',
    'aracatuba': 'Araçatuba',
    'assis': 'Assis',
    'catanduva': 'Catanduva',
    'jaú': 'Jaú',
    'jau': 'Jaú',
    'são carlos': 'São Carlos',
    'sao carlos': 'São Carlos',
    'americana': 'Americana',
    'marília': 'Marília',
    'marilia': 'Marília',
    'jaboticabal': 'Jaboticabal',
    'lençóis paulista': 'Lençóis Paulista',
    'lencois paulista': 'Lençóis Paulista',
    'orlândia': 'Orlândia',
    'orlandia': 'Orlândia'
  };
  
  // Aplicar cada padrão de abreviação
  for (const { padrao, substituicao } of abreviacoes) {
    if (resultado.match(padrao)) {
      resultado = resultado.replace(padrao, substituicao);
      break; // Aplicar apenas o primeiro padrão que corresponder
    }
  }
  
  // Aplicar correção de nomes de cidades
  for (const [cidadeAbreviada, cidadeCompleta] of Object.entries(cidadesComuns)) {
    const regex = new RegExp(`\\b${cidadeAbreviada}\\b`, 'gi');
    if (resultado.match(regex)) {
      resultado = resultado.replace(regex, cidadeCompleta);
      break; // Aplicar apenas a primeira correção de cidade
    }
  }
  
  return resultado;
}

/**
 * Encontra sugestões baseadas em similaridade
 */
function encontrarSugestoes(nome: string): Array<{orgao: string, similaridade: number}> {
  const sugestoes: Array<{orgao: string, similaridade: number}> = [];
  
  for (const orgao of ORGAOS_JULGADORES_DATABASE) {
    const similaridade = calcularSimilaridade(nome.toLowerCase(), orgao.toLowerCase());
    
    if (similaridade >= 0.7) { // Threshold de 70%
      sugestoes.push({ orgao, similaridade });
    }
  }
  
  // Ordenar por similaridade (maior primeiro)
  return sugestoes.sort((a, b) => b.similaridade - a.similaridade).slice(0, 5);
}

/**
 * Calcula similaridade entre duas strings usando algoritmo de Levenshtein
 */
function calcularSimilaridade(str1: string, str2: string): number {
  const matrix = [];
  
  for (let i = 0; i <= str2.length; i++) {
    matrix[i] = [i];
  }
  
  for (let j = 0; j <= str1.length; j++) {
    matrix[0][j] = j;
  }
  
  for (let i = 1; i <= str2.length; i++) {
    for (let j = 1; j <= str1.length; j++) {
      if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
        matrix[i][j] = matrix[i - 1][j - 1];
      } else {
        matrix[i][j] = Math.min(
          matrix[i - 1][j - 1] + 1,
          matrix[i][j - 1] + 1,
          matrix[i - 1][j] + 1
        );
      }
    }
  }
  
  const distancia = matrix[str2.length][str1.length];
  const maxLength = Math.max(str1.length, str2.length);
  
  return 1 - (distancia / maxLength);
}

/**
 * Normaliza uma lista de órgãos
 */
export function normalizarListaOrgaos(orgaos: string[]): Array<NormalizacaoResult> {
  return orgaos.map(orgao => normalizarOrgaoJulgador(orgao));
}

/**
 * Verifica se um órgão existe na base de dados
 */
export function orgaoExiste(nome: string): boolean {
  return normalizarOrgaoJulgador(nome).encontrado;
}

/**
 * Obtém sugestões para um nome de órgão
 */
export function obterSugestoes(nome: string): string[] {
  const resultado = normalizarOrgaoJulgador(nome);
  return resultado.sugestoes || [];
} 